<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="../static/include/head">

	<title>REGISTRAR USUARIO</title>

</head>

<body>

	<div th:replace="../static/include/navbar"></div>

	<div class="container pt-3 bg-light">
		<div>
			<h2>LISTA DE USUARIO</h2>
		</div>

		<div class="my-4">
			<a class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#gestionarUsuario"
				href="agregarUsuario">NUEVO USUARIO</a>
				
		</div>

		
		<div th:if="${mensaje}" th:text="${mensaje}" class="alert alert-warning"></div>

		<div class="table-responsive border" style="height: 600px;">
			<table class="table table-bordered">
				<thead>
					<tr>
						<th>ID</th>
						<th>TIPO</th>
						<th>NOMBRE</th>
						<th>APELLIDO</th>
						<th>DISTRITO</th>
						<th>EMAIL</th>
						<th>IMAGEN</th>
						<th>ESTADO</th>
						<th>ACCIONES</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="usuario : ${listaUsuario}">
						<td th:text="${usuario.idUsuario}"></td>
						<td th:text="${usuario.tipoUsuario.desTipoUsuario}"></td>
						<td th:text="${usuario.nomUsuario}"></td>
						<td th:text="${usuario.apeUsuario}"></td>
						<td th:text="${usuario.distritoUsuario.desDistrito}"></td>
						<td th:text="${usuario.emailUsuario}"></td>
						<td>
							<img th:src="@{'data:image;base64,' + ${Base64.base64ToString(usuario.imagenUsuario)}}"
								width="100px" height="100px" />
						</td>
						<td th:text="${usuario.estadoUsuario}"></td>
						<td>
							<a th:href="@{/actualizaUsuario/{id}(id=${usuario.idUsuario})}"
								class="btn btn-primary">EDITAR</a>
						</td>
					</tr>
				</tbody>
			</table>
		</div>

	</div>

	<!-- INICIAMOS EL MODAL PARA TRATADO DE DATOS -->

	<div class="modal fade modal-lg" id="gestionarUsuario" data-bs-backdrop="static">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header text-bg-danger">
					<h2 class="modal-title fs-5">NUEVO USUARIO</h2>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					
					<div th:insert="registraUsuario::fragGestionUsuario"></div>
					
				</div>
			</div>
		</div>
	</div>


</body>

</html>